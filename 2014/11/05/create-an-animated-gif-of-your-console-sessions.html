<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Massimo Ronca ~ a reckless programmer with a sarcastic wit - Create an animated GIF of your console sessions</title>

    

    
    <meta name="description" content="Welcome to Massimo Ronca website, this post is about: animated gif bash, console session animated gif, ttyrec, ttyrplay, ttygif, gifsicle">
    

    <link rel="stylesheet" href="/assets/stylesheets/fonts.css">
    <link rel="stylesheet" href="/assets/stylesheets/styles.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="/assets/stylesheets/solarized-dark.css">
    <script src="/assets/javascripts/highlight.pack.js"></script>

    <link href="" rel="alternate" type="application/rss+xml" title="Massimo Ronca ~ a reckless programmer with a sarcastic wit" />

    <link rel="icon" type="image/png" href="/assets/images/icon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    

    <meta name="og:title" content="Create an animated GIF of your console sessions">
    <meta name="og:type" content="website">
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header-title"><a href="/">Massimo Ronca</a></h1>

        <img src="/assets/images/massimoronca.png" class="logo" alt="Massimo Ronca">
        <p>This is not</p>
        <p>the programmer</p>
        <p>you're looking for</p>

     <footer>
       <a href="https://github.com/wstucco" title="Github"><img src="/assets/images/github-64.png" alt="Github" class="github-logo"> </a>
       <a href="https://twitter.com/wstucco" title="Twitter"><img src="/assets/images/twitter-64.png" alt="Twitter" class="twitter-logo"> </a>
       <a href="https://it.linkedin.com/in/massimoronca" title="Linkedin"><img src="/assets/images/linkedin-64.png" alt="Linkedin" class="linkedin-logo"> </a>
      </footer>
    </header>


  <section>
  <article id="content" class="post">
  <h1 class="post-title">Create an animated GIF of your console sessions</h1>
  <div class="post-content">
    <p><img src="http://s2.quickmeme.com/img/32/325fc351053e41d230961a71308d37937e68192130d11a82308ae619571ef942.jpg" alt="animate all the things" /></p>

<p>More often than not, our job involves opening up a console, typing some command and waiting for the output.<br />
When I write articles, sometimes I feel the need to show how the commands behave interactively, not only the sequence of commands you have to type.<br />
It&rsquo;s easier to understand by looking at an animation, than reading<br />
&ldquo;when you hit TAB &lt;this happen&gt;&rdquo;.</p>

<p>For example, can you explain how the emmet plugin for VIM works, better than this, using only words?</p>

<p><img src="https://qiita-image-store.s3.amazonaws.com/0/38647/86b91c27-f894-c969-89b0-5846408ad1db.gif" alt="emmet plugin for VIM" /></p>

<p>Fortunately, the solution is pretty easy.<br />
You need a few open source tools, if you&rsquo;re on a Mac, like me, you should already have installed <a href="http://brew.sh/">Homebrew</a>, and Imagemagick (<code>brew install imagemagick</code>).</p>

<p>To record your sessions, you need <code>ttyrec</code> (<code>brew install ttyrec</code> on Mac).<br />
The usage is very simlpe</p>

<pre><code class="language-bash">usage: ttyrec [-u] [-e command] [-a] [file]

OPTIONS
       -a     Append the output to file or ttyrecord, rather than overwriting it.

       -u     With this option, ttyrec automatically calls uudecode(1) and  saves  its  output  when  uuencoded  data
              appear on the session.  It allow you to transfer files from remote host.  You can call ttyrec with this
              option, login to the remote host and invoke uuencode(1) on it for the file you want to transfer.

       -e command
              Invoke command when ttyrec starts.
</code></pre>

<p><code>file</code> is the name of the file that will be used to record the session. If no file name is given, <code>ttyrecord</code> will be used.</p>

<p>A new session is started as soon as you launch <code>ttyrec</code> and is automatically saved when you close the session with <code>CTRL+D</code> or <code>exit</code>.</p>

<p>To replay an already saved session, use</p>

<pre><code class="language-bash">ttyplay [-s SPEED] [-n] [-p] file

OPTIONS
       -s SPEED
              multiple the playing speed by SPEED (default is 1).

       -n     no wait mode.  Ignore the timing information in file.

       -p     peek another person's tty session.
</code></pre>

<p>Let&rsquo;s see how it looks</p>

<p><img src="http://i.imgur.com/q7NHxN0.gif" alt="ttyrec session" /></p>

<p>Now that we have a recorded sessions, we need to convert it to an animated GIF.<br />
We&rsquo;ll use <a href="https://github.com/icholy/ttygif"><code>ttygif</code></a> for the task.<br />
There&rsquo;s no installer for it, you must compile it from the sources</p>

<pre><code class="language-bash">$ git clone https://github.com/icholy/ttygif.git
$ cd ttygif
$ make
</code></pre>

<p>Once make is done, you will find some executable files in the folder</p>

<pre><code class="language-bash">-rwxr-xr-x   1 maks  staff    881 Nov  5 16:08 concat.sh
-rwxr-xr-x   1 maks  staff    829 Nov  5 16:08 concat_osx.sh
-rwxr-xr-x   1 maks  staff  14836 Nov  5 16:08 ttygif
</code></pre>

<p>In my setup I&rsquo;ve linked <code>ttygif</code> to <code>/usr/local/bin</code>  and <code>concat.sh</code> (<code>concat_osx.sh</code> in case you&rsquo;re on a Mac) to <code>/usr/local/bin/ttyconcat</code> to avoid name clash.<br />
Creating the gif is a two steps process: first you launch <code>ttygif &lt;recfile&gt;</code> to genearet a sequence of PNGs, then you launch the <code>ttyconcat</code> script we linked before and it automatically creates the animated GIF for you.<br />
Optionally you can pass an output filename to <code>ttyconcat</code>, if omitted the image will be saved as <code>output.gif</code>.</p>

<p>If you are a prefectionist, there&rsquo;s an optional final step, install <a href="http://www.lcdf.org/gifsicle/"><code>gifsicle</code></a> (<code>brew install gifsicle</code>) and give your animation the final touches.<br />
I usually add a fixed delay between frames, make it loop forever and optimize the size with this command line</p>

<pre><code class="language-bash">gifsicle --delay=10 --loop=0 -O3 &lt; in.gif &gt; out.gif
</code></pre>

<p>More otpions can be found on the <a href="http://www.lcdf.org/gifsicle/man.html"><code>gifsicle</code> man page</a>.</p>

  </div>
  <div class='small post-meta'>
    posted 
    on Wednesday, Nov 5 2014
  </div>
</article>

  </section>


    </div>
    <script src="/assets/javascripts/scale.fix.js"></script>
    <script src="/assets/javascripts/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1218157-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>